#!/usr/bin/env ruby
require 'slop'
require_relative '../lib/imdb'

options = Slop.parse do |o|
  o.integer '--pay', required: true
  o.string '--show', required: true
end

netflix = Imdb::Netflix.new('../data/movies.txt')
filter_key, filter_value = options[:show].split(':')

# p options[:pay]
# p filter_key
# p filter_value

begin
  netflix.pay(options[:pay])
  netflix.show filter_key.to_sym => filter_value
rescue StandardError => e
  puts e.message
end
